<h1 class="page-header">{{project.name}}
  <small>
    <form ng-show="project.name" role="form" class="form-inline" style="display:inline-block;float:right">
      <label>branch: 
        <select class="form-control" ng-model="project.branch">
          <option ng-repeat="branch in project.branches | orderBy: 'name'" ng-selected="branch.name == project.branch" value="{{branch.name}}">
            {{branch.name}}
          </option>
        </select>
      </label> 
    </form>
  </small>
</h1>
  <div class="container-fluid">
    <div class="row">
      <div class="table-responsive col-md-4" ng-show="summary">
        <table class="table table-condensed">
          <tbody>
            <tr>
              <td>Code Fat</td>
              <td><span style="font-size: 3em;">{{summary.codefat|number:2}}%</span></td>
            </tr>
            <tr>
              <td>SLOC</td>
              <td><span style="font-size: 2em;">{{summary.sloc|number}}</span></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-8" id="chart_div">
        <trend data="data" since="since"></trend>
        <p style="text-align:right"><small>Since: {{since.toLocaleDateString()}}</small></p>
      </div>
    </div>
  </div>
  <h2 class="sub-header">Authors</h2>
  <p>
    Following table and pie charts shows each developers overall contribution to <strong>{{project.name}}</strong> project's <strong>{{project.branch}}</strong> branch. However, this contribution data may have some noise factors such as reverts, imports, feature drops which are hard to say as contribution. To explore the contribution data in more interactive manner, visit <strong>Explore</strong>(coming soon)!
  </p>
  <div class="row">
    <div class="col-md-8">
      <div class="table-responsive">
        <table class="table table-condensed">
          <thead>
            <tr>
              <th>Author</th>
              <th class="number-column">#Commits</th>
              <th class="number-column">&Sigma;&Delta;SLOC</th>
              <th class="number-column">&Sigma;&Delta;FLOC</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="user in users | orderBy: 'no_commits' : true | limitTo: limit "
                ng-mouseenter="select(user)">
              <td><a href="#/user/{{user.author}}">{{user.author}}</a></td>
              <td class="number-column">{{user.no_commits | number}}
                <span inline-pie data="[user.no_commits,commits.length]"></span>
              </td>
              <td class="number-column">{{user.delta_sloc | number}}</td>
              <td class="number-column">{{user.delta_floc | number:2}}</td>
            </tr>
          </tbody>
          <tfoot ng-show="users.length > lessLimit">
            <tr>
              <td colspan="4" align="right">
                <a href="" ng-show="lessLimit == limit" ng-click="showMoreToggle()">
                  Show {{users.length}} users...</a>
                <a href="" ng-show="lessLimit < limit" ng-click="showMoreToggle()">
                  Collapse...</a>  
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    <div class="col-md-4" align="center">
      <pie-chart data="users" selected="selectedUser" get-value="d.no_commits"></pie-chart>
    </div>
  </div>
<h2 class="sub-header">{{commits.length}} Commit(s)</h2>
<div class="col-md-4 col-md-offset-8">
  <div class="input-group">
    <span class="input-group-addon"><span class="glyphicon glyphicon-filter"></span></span>
    <input type="search" class="form-control search-query" placeholder="Search commit..." ng-model="q" />
  </div>
</div>
<div class="table-responsive">
	<table class="table table-condensed">
		<thead>
			<tr>
        <th>No.</th>
				<th>ID</th>
        <th>Title</th>
				<th>Committed by</th>
				<th>When</th>
				<th>&Delta;SLOC</th>
				<th>&Delta;FLOC</th>
				<th>&Delta;<abbr title="Code Fat">CF</abbr></th>
			</tr>
		</thead>
		<tbody>
      <tr ng-repeat="commit in commits | filter: q | page:currentPage:pageSize">
        <td>{{$index + pageStart}}</td>
        <td><a class="sha1" href="#/commit/{{project.id}}/{{commit.sha1}}">{{commit.sha1.substring(0,7)}}</a></td>
        <td><a href="#/commit/{{project.id}}/{{commit.sha1}}" ng-bind-html="commit.title|shorten"></a></td>
        <td><a href="#/user/{{commit.author}}">{{commit.author}}</a></td>
        <td class='truncate'>{{commit.timestamp *1000|date:'short'}}</td>
        <td>{{commit.delta_sloc}}</td>
        <td>{{commit.delta_floc|number:2}}</td>
        <td>{{commit.delta_codefat|number:2}}%</td>
      </tr>
		</tbody>
	</table>
  <pagination class="pagination-sm" total-items="(commits|filter:q).length" items-per-page="pageSize" page="currentPage"></pagination>
</div>